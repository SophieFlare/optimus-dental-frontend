;/*FB_PKG_DELIM*/

__d("BaseAdaptiveTabs.react",["react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));i.useCallback;var k={absoluteFill:{bottom:"x1ey2m1c",boxSizing:"x9f619",end:"xds687c",start:"x17qophe",position:"x10l6tqk",top:"x13vifvy",$$css:!0},absoluteTop:{end:"xds687c",start:"x17qophe",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},moreTab:{alignItems:"x6s0dn4",display:"x3nfvp2",justifyContent:"x1nhvcw1",$$css:!0},moreWrapper:{display:"x1rg5ohu",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",verticalAlign:"x16dsc37",$$css:!0},root:{overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1ja2u2z",$$css:!0},tab:{alignItems:"x6s0dn4",display:"x3nfvp2","float":"xrbpyxo",justifyContent:"x1nhvcw1",verticalAlign:"x16dsc37",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(46),e=a.maxVisibleTabs,f=a.moreTab,g=a.moreTabWidthXStyle,i=a.moreTabXStyle,l=a.rootXStyle,m=a.selectedTabIndex,n=a.tabRole,o=a.tabs,p=a.height,q=a.heightXStyle;a=e===void 0?Infinity:e;var r=n===void 0?"tab":n;b[0]!==a||b[1]!==o?(e=a<o.length?o.slice(0,a):o,b[0]=a,b[1]=o,b[2]=e):e=b[2];var s=e;n=a>=o.length;e=r==="tab"?"tablist":"group";b[3]!==q||b[4]!==m||b[5]!==r||b[6]!==s?(a=function(a){return s.map(function(b,d){return typeof b==="function"?b([k.tab,q],d,a):j.createElement("div",babelHelpers["extends"]({"aria-selected":r==="img"?void 0:m===d},(h||(h=c("stylex"))).props(k.tab,q),{key:d+"tab",role:r}),b)})},b[3]=q,b[4]=m,b[5]=r,b[6]=s,b[7]=a):a=b[7];o=a;b[8]!==n||b[9]!==q||b[10]!==l?(a=(h||(h=c("stylex"))).props(k.root,q,n&&l),b[8]=n,b[9]=q,b[10]=l,b[11]=a):a=b[11];b[12]===Symbol["for"]("react.memo_cache_sentinel")?(l={className:"x14ju556 x1n2onr6"},b[12]=l):l=b[12];var t;b[13]!==n||b[14]!==o||b[15]!==e?(t=n&&j.jsx("div",babelHelpers["extends"]({"aria-hidden":!0},{className:"x6ikm8r x10wlt62 xlshs6z"},{role:e,children:o(!0)})),b[13]=n,b[14]=o,b[15]=e,b[16]=t):t=b[16];var u;b[17]!==n?(u=(h||(h=c("stylex"))).props(n&&k.absoluteFill),b[17]=n,b[18]=u):u=b[18];var v;b[19]!==q||b[20]!==g||b[21]!==i?(v=(h||(h=c("stylex")))(k.moreWrapper,q,g,i),b[19]=q,b[20]=g,b[21]=i,b[22]=v):v=b[22];b[23]!==n||b[24]!==p?(g=n?{height:"calc((100% - "+p+"px) * 9999)",maxHeight:p,minHeight:0}:void 0,b[23]=n,b[24]=p,b[25]=g):g=b[25];b[26]!==q||b[27]!==f?(i=typeof f==="function"?f([k.absoluteTop,k.moreTab,q]):j.jsx("div",babelHelpers["extends"]({},(h||(h=c("stylex"))).props(k.absoluteTop,k.moreTab,q),{children:f})),b[26]=q,b[27]=f,b[28]=i):i=b[28];b[29]!==g||b[30]!==i||b[31]!==v?(n=j.jsx("div",{className:v,style:g,children:i}),b[29]=g,b[30]=i,b[31]=v,b[32]=n):n=b[32];b[33]!==o?(p=o(!1),b[33]=o,b[34]=p):p=b[34];b[35]!==n||b[36]!==p||b[37]!==u||b[38]!==e?(f=j.jsxs("div",babelHelpers["extends"]({},u,{"data-testid":void 0,role:e,children:[n,p]})),b[35]=n,b[36]=p,b[37]=u,b[38]=e,b[39]=f):f=b[39];b[40]!==f||b[41]!==t?(g=j.jsxs("div",babelHelpers["extends"]({},l,{children:[t,f]})),b[40]=f,b[41]=t,b[42]=g):g=b[42];b[43]!==g||b[44]!==a?(i=j.jsx("div",babelHelpers["extends"]({},a,{children:g})),b[43]=g,b[44]=a,b[45]=i):i=b[45];return i}g["default"]=a}),98);
__d("CometPivotLinkTab.react",["FDSPivotLink.react","react","stylex","useIntersectionObserver","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useState,n={tab:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",flexShrink:"x2lah0s",minHeight:"x1hshjfz",paddingStart:"x1e558r4",paddingEnd:"x150jy0e",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0}};e=k.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var d=a.FocusItem,e=a.containerRef,f=a.disabled;f=f===void 0?!1:f;var g=a.hasNewContentBadge;g=g===void 0?!1:g;var j=a.image,o=a.imagePlacement;o=o===void 0?"left":o;var p=a.isHiddenOverride;p=p===void 0?!1:p;var q=a.label,r=a.labelIsHidden;r=r===void 0?!1:r;var s=a.linkType,t=a.onHidden,u=a.role,v=a.selected;v=v===void 0?!1:v;var w=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["FocusItem","containerRef","disabled","hasNewContentBadge","image","imagePlacement","isHiddenOverride","label","labelIsHidden","linkType","onHidden","role","selected","xstyle"]);var x=m(!0),y=x[0],z=x[1],A=(h||(h=c("useUnsafeRef_DEPRECATED")))(t);A.current=t;x=l(function(a){a=a.intersectionRatio;a=a<.5;z(a);A.current&&A.current(a)},[A]);t=c("useIntersectionObserver")(x,{root:e?function(){return e.current}:null,threshold:.5});x=k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(n.tab,w),{ref:b,role:"none",children:k.jsx(c("FDSPivotLink.react"),{disabled:f,focusable:!p,hasNewContentBadge:g,image:j,imagePlacement:o,label:q,labelIsHidden:r,linkProps:a.linkProps,onPress:a.onPress,ref:t,role:u?u:"tab",selected:v,testid:void 0,type:s})}));return d?k.jsx(d,{disabled:p||y,children:x}):x}a.displayName=a.name+" [from "+f.id+"]";d=e;g["default"]=d}),98);
__d("FDSPivotLinkTabs.react",["fbt","ix","BaseAdaptiveTabs.react","CometComponentWithKeyCommands.react","CometKeys","CometPivotLinkTab.react","FDSDeferredPopoverTrigger.react","FocusGroup.react","fbicon","focusScopeQueries","react","react-compiler-runtime","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=k||(k=d("react"));b=k;b.useCallback;b.useMemo;var m=b.useRef,n=b.useState,o=c("requireDeferred")("CometTabMenuForPivotLinks.react").__setRef("FDSPivotLinkTabs.react");e=d("FocusGroup.react").createFocusGroup(d("focusScopeQueries").tabbableScopeQuery);var p=e[0],q=e[1],r={height:{height:"xc9qbxq",$$css:!0},moreTabWidth:{width:"x1useyqa",$$css:!0},root:{marginStart:"x139jcc6",marginEnd:"xcud41i",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(44),e=a.linkType,f=a.maxTabs,g=a.moreTabConfig,k=a.tabs;a=a.tabsContainerStyle;var x=f===void 0?Infinity:f;b[0]!==x||b[1]!==k.length?(f=function(){return Array.from({length:k.length}).map(t).filter(function(a){return a>=x})},b[0]=x,b[1]=k.length,b[2]=f):f=b[2];f=n(f);var y=f[0],z=f[1],A=m(null);if(b[3]!==y||b[4]!==k){b[6]!==k?(f=function(a){return(a=k[a])==null?void 0:a.selected},b[6]=k,b[7]=f):f=b[7];f=y.some(f);b[3]=y;b[4]=k;b[5]=f}else f=b[5];f=f;var B=f;b[8]!==y.length||b[9]!==B||b[10]!==e||b[11]!==(g==null?void 0:g.image)||b[12]!==(g==null?void 0:g.imagePlacement)||b[13]!==(g==null?void 0:g.label)||b[14]!==(g==null?void 0:g.labelIsHidden)||b[15]!==(g==null?void 0:g.xstyle)?(f=function(a,b){var f=[{command:{key:c("CometKeys").DOWN},description:h._(/*BTDS*/"__JHASH__XKKEZVjEqk8__JHASH__"),handler:b}];return l.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:f,children:l.jsx(c("CometPivotLinkTab.react"),{FocusItem:q,"aria-haspopup":"menu","aria-label":h._(/*BTDS*/"__JHASH__ELGUGxAyQfA__JHASH__"),image:(f=g==null?void 0:g.image)!=null?f:{icon:d("fbicon")._(i("484386"),16),type:"icon"},imagePlacement:(f=g==null?void 0:g.imagePlacement)!=null?f:"left",isHiddenOverride:y.length===0,label:(f=g==null?void 0:g.label)!=null?f:h._(/*BTDS*/"__JHASH__ELGUGxAyQfA__JHASH__"),labelIsHidden:(f=g==null?void 0:g.labelIsHidden)!=null?f:!0,linkType:e,onPress:b,ref:a,role:"button",selected:B,testid:void 0,xstyle:g==null?void 0:g.xstyle})})},b[8]=y.length,b[9]=B,b[10]=e,b[11]=g==null?void 0:g.image,b[12]=g==null?void 0:g.imagePlacement,b[13]=g==null?void 0:g.label,b[14]=g==null?void 0:g.labelIsHidden,b[15]=g==null?void 0:g.xstyle,b[16]=f):f=b[16];f=f;if(b[17]!==y||b[18]!==k){var C;b[20]!==k?(C=function(a){return k[a]},b[20]=k,b[21]=C):C=b[21];C=y.map(C).filter(Boolean);b[17]=y;b[18]=k;b[19]=C}else C=b[19];var D;b[22]!==C?(D={menuItems:C},b[22]=C,b[23]=D):D=b[23];b[24]!==f||b[25]!==D?(C=l.jsx(c("FDSDeferredPopoverTrigger.react"),{popoverProps:D,popoverResource:o,children:f}),b[24]=f,b[25]=D,b[26]=C):C=b[26];f=C;b[27]!==a?(D=(j||(j=c("stylex"))).props(r.root,a),b[27]=a,b[28]=D):D=b[28];a=(C=g==null?void 0:g.width)!=null?C:r.moreTabWidth;b[29]!==k?(C=k.findIndex(s),b[29]=k,b[30]=C):C=b[30];var E;b[31]!==y||b[32]!==e||b[33]!==k?(E=k.map(function(a){return function(b,d,f){return l.createElement("div",babelHelpers["extends"]({"aria-hidden":y.includes(d)?!0:void 0},(j||(j=c("stylex"))).props(b),{key:d+"tab",role:y.includes(d)?void 0:"none"}),l.jsx(c("CometPivotLinkTab.react"),babelHelpers["extends"]({},a,{FocusItem:q,containerRef:f?void 0:A,linkType:e,onHidden:function(a){z(function(b){return a?u(b,d):v(b,d)})},ref:a.ref,testid:void 0})))}}),b[31]=y,b[32]=e,b[33]=k,b[34]=E):E=b[34];var F;b[35]!==x||b[36]!==f||b[37]!==a||b[38]!==C||b[39]!==E?(F=l.jsx(c("BaseAdaptiveTabs.react"),{height:36,heightXStyle:r.height,maxVisibleTabs:x,moreTab:f,moreTabWidthXStyle:a,selectedTabIndex:C,tabs:E}),b[35]=x,b[36]=f,b[37]=a,b[38]=C,b[39]=E,b[40]=F):F=b[40];b[41]!==F||b[42]!==D?(f=l.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:w,children:l.jsx(p,{orientation:"horizontal",preventScrollOnFocus:!0,tabScopeQuery:d("focusScopeQueries").tabbableScopeQuery,wrap:!0,children:l.jsx("div",babelHelpers["extends"]({},D,{ref:A,children:F}))})}),b[41]=F,b[42]=D,b[43]=f):f=b[43];return f}function s(a){return a.selected}function t(a,b){return b}function u(a,b){return a.includes(b)?a:[].concat(a,[b]).sort(function(a,b){return a-b})}function v(a,b){return a.includes(b)?a.filter(function(a){return a!==b}):a}var w=[{command:{key:c("CometKeys").LEFT},description:h._(/*BTDS*/"__JHASH__1VqMgLPpraa__JHASH__"),handler:function(){}},{command:{key:c("CometKeys").RIGHT},description:h._(/*BTDS*/"__JHASH__7zajSsSIBFZ__JHASH__"),handler:function(){}}];g["default"]=a}),226);
__d("LSClearLoadingFlagsForThreadRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return a[1]?b.forEach(b.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingAfter:!1})}):b.sequence([function(d){return b.i64.eq(b.i64.cast([0,0]),a[0])?b.sequence([function(c){return b.forEach(b.db.table(198).fetch([[[a[2]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!1})})},function(a){return c[8]=b.i64.cast([0,0]),c[9]=void 0,c[10]=!1,c[11]=!1,b.forEach(b.db.table(198).fetch(),function(a){a=a.item;return c[12]=a.minLastActivityTimestampMs,c[14]=a.minThreadKey,c[13]=b.i64.lt(c[8]==null?c[12]:c[8],c[12]),c[8]=c[13]?c[12]:c[8],c[9]=c[13]?c[14]:c[9],c[10]=c[10]||a.isLoadingBefore,c[11]=c[11]||b.i64.gt(c[12],b.i64.cast([0,1]))&&b.i64.gt(c[14],b.i64.cast([-2147483648,0]))})},function(a){return a=[c[8],c[9],c[10],c[11]],c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],a}]):b.resolve((d=[b.i64.cast([0,0]),void 0,!1,!1],c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],d))},function(c){return b.forEach(b.db.table(220).fetch([[[a[2],a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:!1})})},function(d){return c[4]=c[0],c[5]=c[1],c[6]=c[2],c[7]=c[3],b.forEach(b.filter(b.db.table(220).fetch(),function(c){return b.i64.eq(c.parentThreadKey,a[0])}),function(a){a=a.item;return c[8]=a.minLastActivityTimestampMs,c[10]=a.minThreadKey,c[9]=b.i64.lt(c[4]==null?c[8]:c[4],c[8]),c[4]=c[9]?c[8]:c[4],c[5]=c[9]?c[10]:c[5],c[6]=c[6]||a.isLoadingBefore,c[7]=c[7]||b.i64.gt(c[8],b.i64.cast([0,1]))&&b.i64.gt(c[10],b.i64.cast([-2147483648,0]))})},function(d){return b.forEach(b.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:c[6]})})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxClearLoadingFlagsForThreadRangeStoredProcedure";a.__tables__=["threads_ranges_v2__generated","inbox_threads_ranges","sync_group_threads_ranges"];e.exports=a}),null);
__d("LSThreadsRangesQuery",["LSClearLoadingFlagsForThreadRange","LSGetCursor","LSIssueNewTaskAndGetTaskID","LSUpsertInboxThreadsRange","LSUpsertSyncGroupThreadsRange"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return a[1]&&c.i64.eq(a[6],c.i64.cast([0,0]))?c.storedProcedure(b("LSClearLoadingFlagsForThreadRange"),a[0],!1,c.i64.cast([0,1])):(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)||a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))&&!(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)&&a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))?c.sequence([function(e){return d[16]=a[3]==null?c.i64.cast([-2147483648,0]):a[3],d[15]=a[6]==null?c.i64.cast([0,1]):a[6],d[17]=c.i64.gt(d[15],c.i64.cast([0,1]))&&c.i64.gt(d[16],c.i64.cast([-2147483648,0])),d[4]=c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))||c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,95])),d[4]&&c.i64.eq(a[0],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSUpsertInboxThreadsRange"),c.i64.cast([0,1]),d[15],d[17],!0,d[16])},function(a){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.db.table(198).fetch(),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.resolve((e=[d[15],d[16],!0,d[17]],d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],e))},function(e){return d[4]?c.sequence([function(e){return c.storedProcedure(b("LSUpsertSyncGroupThreadsRange"),c.i64.cast([0,1]),a[0],d[15],d[17],!0,d[16])},function(b){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.filter(c.db.table(220).fetch(),function(b){return c.i64.eq(b.parentThreadKey,a[0])}),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[5]=a[0],d[6]=a[1],d[7]=a[2],d[8]=a[3],a}]):c.resolve((e=[d[0],d[1],d[2],d[3]],d[5]=e[0],d[6]=e[1],d[7]=e[2],d[8]=e[3],e))},function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,1])).then(function(a){return a=a,d[9]=a[0],a})},function(e){return d[10]=new c.Map(),d[10].set("is_after",a[2]),d[10].set("parent_thread_key",a[0]),d[10].set("reference_thread_key",a[2]?a[4]:a[3]),d[10].set("reference_activity_timestamp",a[2]?a[5]:a[6]),d[10].set("additional_pages_to_fetch",a[7]),d[10].set("cursor",d[9]),d[10].set("messaging_tag",void 0),d[10].set("sync_group",c.i64.cast([0,1])),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[18]=c.i64.of_float(Date.now()),d[11]=c.i64.add(d[18],c.i64.cast([0,0]))):d[11]=c.i64.cast([0,0]),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"trq",c.i64.cast([0,145]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.db.table(10).fetch([[[a[0]]]]).next().then(function(b,e){e=b.done;b=b.value;return e?c.db.table(10).add({parentThreadKey:a[0],minThreadKey:d[6]==null?c.i64.cast([-2147483648,0]):d[6],minLastActivityTimestampMs:d[5]==null?c.i64.cast([0,1]):d[5],maxLastActivityTimestampMs:c.i64.cast([0,1]),maxThreadKey:c.i64.cast([-2147483648,0]),isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1}):(b.item,c.forEach(c.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1})}))})}]):c.resolve()},function(e){return a[1]&&c.i64.eq(a[6],c.i64.cast([0,0]))?c.storedProcedure(b("LSClearLoadingFlagsForThreadRange"),a[0],!1,c.i64.cast([0,95])):(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)||a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))&&!(a[1]&&c.i64.neq(a[6],void 0)&&c.i64.neq(a[3],void 0)&&a[2]&&c.i64.neq(a[5],void 0)&&c.i64.neq(a[4],void 0))?c.sequence([function(e){return d[16]=a[3]==null?c.i64.cast([-2147483648,0]):a[3],d[15]=a[6]==null?c.i64.cast([0,1]):a[6],d[17]=c.i64.gt(d[15],c.i64.cast([0,1]))&&c.i64.gt(d[16],c.i64.cast([-2147483648,0])),d[4]=c.i64.eq(c.i64.cast([0,95]),c.i64.cast([0,1]))||c.i64.eq(c.i64.cast([0,95]),c.i64.cast([0,95])),d[4]&&c.i64.eq(a[0],c.i64.cast([0,0]))?c.sequence([function(a){return c.storedProcedure(b("LSUpsertInboxThreadsRange"),c.i64.cast([0,95]),d[15],d[17],!0,d[16])},function(a){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.db.table(198).fetch(),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],a}]):c.resolve((e=[d[15],d[16],!0,d[17]],d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=e[3],e))},function(e){return d[4]?c.sequence([function(e){return c.storedProcedure(b("LSUpsertSyncGroupThreadsRange"),c.i64.cast([0,95]),a[0],d[15],d[17],!0,d[16])},function(b){return d[18]=d[15],d[19]=d[16],d[20]=!0,d[21]=d[17],c.forEach(c.filter(c.db.table(220).fetch(),function(b){return c.i64.eq(b.parentThreadKey,a[0])}),function(a){a=a.item;return d[22]=a.minLastActivityTimestampMs,d[24]=a.minThreadKey,d[23]=c.i64.lt(d[18]==null?d[22]:d[18],d[22]),d[18]=d[23]?d[22]:d[18],d[19]=d[23]?d[24]:d[19],d[20]=d[20]||a.isLoadingBefore,d[21]=d[21]||c.i64.gt(d[22],c.i64.cast([0,1]))&&c.i64.gt(d[24],c.i64.cast([-2147483648,0]))})},function(a){return a=[d[18],d[19],d[20],d[21]],d[5]=a[0],d[6]=a[1],d[7]=a[2],d[8]=a[3],a}]):c.resolve((e=[d[0],d[1],d[2],d[3]],d[5]=e[0],d[6]=e[1],d[7]=e[2],d[8]=e[3],e))},function(a){return c.storedProcedure(b("LSGetCursor"),c.i64.cast([0,95])).then(function(a){return a=a,d[9]=a[0],a})},function(e){return d[10]=new c.Map(),d[10].set("is_after",a[2]),d[10].set("parent_thread_key",a[0]),d[10].set("reference_thread_key",a[2]?a[4]:a[3]),d[10].set("reference_activity_timestamp",a[2]?a[5]:a[6]),d[10].set("additional_pages_to_fetch",a[7]),d[10].set("cursor",d[9]),d[10].set("messaging_tag",void 0),d[10].set("sync_group",c.i64.cast([0,95])),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[18]=c.i64.of_float(Date.now()),d[11]=c.i64.add(d[18],c.i64.cast([0,0]))):d[11]=c.i64.cast([0,0]),d[12]=c.toJSON(d[10]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),"trq",c.i64.cast([0,145]),d[12],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[13]=a[0],a})},function(b){return c.db.table(10).fetch([[[a[0]]]]).next().then(function(b,e){e=b.done;b=b.value;return e?c.db.table(10).add({parentThreadKey:a[0],minThreadKey:d[6]==null?c.i64.cast([-2147483648,0]):d[6],minLastActivityTimestampMs:d[5]==null?c.i64.cast([0,1]):d[5],maxLastActivityTimestampMs:c.i64.cast([0,1]),maxThreadKey:c.i64.cast([-2147483648,0]),isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1}):(b.item,c.forEach(c.db.table(10).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({isLoadingBefore:d[7],isLoadingAfter:!1,hasMoreBefore:d[8],hasMoreAfter:!1})}))})}]):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxThreadsRangesQueryStoredProcedure";a.__tables__=["inbox_threads_ranges","sync_group_threads_ranges","threads_ranges_v2__generated"];e.exports=a}),null);
__d("XCometGamingVideoControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/gaming/video/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);/*FB_PKG_DELIM*/
__d("LSClearMessagePlaceholderRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(13).fetch([[[a[0],b.i64.cast([0,0])]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.minMessageId===a[1]&&b.i64.eq(b.i64.cast([0,0]),c.minTimestampMs)&&b.i64.eq(a[2],c.maxTimestampMs)}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearMessagePlaceholderRangeStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSComputeParticipantCapabilities",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.filter(c.db.table(14).fetch([[[a[1],d[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,d[0])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[!1,!1],d[1]=c[0],d[2]=c[1],c):(b=a.item,c=[b.isAdmin==null?!1:b.isAdmin,b.isModerator],d[1]=c[0],d[2]=c[1],c)})},function(b){return c.filter(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[!1,!1],d[4]=c[0],d[5]=c[1],c):(b=a.item,c=[b.isAdmin==null?!1:b.isAdmin,b.isModerator],d[4]=c[0],d[5]=c[1],c)})},function(b){return c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[c.i64.cast([0,1073741823]),c.i64.cast([0,0]),!1],d[7]=e[0],d[8]=e[1],d[9]=e[2],e):(b=a.item,e=[b.capabilities==null?c.i64.cast([0,1073741823]):b.capabilities,b.contactTypeExact==null?c.i64.cast([0,0]):b.contactTypeExact,b.isManagedByViewer==null?!1:b.isManagedByViewer],d[7]=e[0],d[8]=e[1],d[9]=e[2],e)})},function(a){return d[12]=c.i64.eq(d[8],c.i64.cast([0,4]))?d[9]?c.i64.cast([0,2612119]):c.i64.or_(c.i64.cast([0,2612119]),c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,3])))):d[7],c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(e){return d[13]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,20]))),d[15]=d[1]&&!d[4]&&c.i64.neq(d[11],a[0])?d[12]:c.i64.eq(c.i64.and_(d[12],d[13]),c.i64.cast([0,0]))?d[12]:c.i64.sub(d[12],d[13]),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(e){return d[16]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,22]))),d[19]=d[4]&&d[1]&&c.i64.neq(d[14],a[0])?d[15]:c.i64.eq(c.i64.and_(d[15],d[16]),c.i64.cast([0,0]))?d[15]:c.i64.sub(d[15],d[16]),d[2]?d[17]=!(d[4]||d[5]):d[17]=!0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(b){return d[20]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,21]))),e[0]=(d[1]||d[2])&&d[17]&&c.i64.neq(a[0],d[18])?d[19]:c.i64.eq(c.i64.and_(d[19],d[20]),c.i64.cast([0,0]))?d[19]:c.i64.sub(d[19],d[20])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxComputeParticipantCapabilitiesStoredProcedure";a.__tables__=["participants","contacts"];e.exports=a}),null);
__d("LSDeleteThread",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0],c[0]=e[0],c[1]=e[1],e):(d=a.item,e=[d.parentThreadKey,d.disappearingThreadKey],c[0]=e[0],c[1]=e[1],e)})},function(a){return b.count(b.db.table(9).fetch([[[c[0]]],"parentThreadKeyLastActivityTimestampMs"])).then(function(a){return c[3]=a})},function(d){return a[1]&&b.i64.neq(c[0],b.i64.cast([0,0]))&&b.i64.eq(c[3],b.i64.cast([0,1]))?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]],[c[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}]):b.sequence([function(c){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.i64.neq(c[1],void 0)?0:0}])}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxDeleteThreadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSGetFirstAvailableAttachmentCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(19).fetchDesc().next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableAttachmentCTAIDStoredProcedure";a.__tables__=["attachment_ctas"];e.exports=a}),null);
__d("LSInsertAttachmentItem",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(18).add({attachmentFbid:a[0],attachmentIndex:a[1],threadKey:a[2],messageId:a[4],defaultActionEnableExtensions:a[31],originalPageSenderId:a[7],titleText:a[8],subtitleText:a[9],bodyText:a[12],playableUrl:a[13],playableUrlFallback:a[14],playableUrlExpirationTimestampMs:a[15],playableUrlMimeType:a[16],dashManifest:a[17],previewUrl:a[18],previewUrlFallback:a[19],previewUrlExpirationTimestampMs:a[20],previewUrlMimeType:a[21],previewWidth:a[22],previewHeight:a[23],imageUrl:a[24],defaultCtaId:a[25],defaultCtaTitle:a[26],defaultCtaType:a[27],defaultButtonType:a[29],defaultActionUrl:a[30],defaultWebviewHeightRatio:a[33],attachmentCta1Id:a[35],cta1Title:a[36],cta1IconType:a[37],cta1Type:a[38],attachmentCta2Id:a[40],cta2Title:a[41],cta2IconType:a[42],cta2Type:a[43],attachmentCta3Id:a[45],cta3Title:a[46],cta3IconType:a[47],cta3Type:a[48],faviconUrl:a[49],faviconUrlFallback:a[50],faviconUrlExpirationTimestampMs:a[51],previewUrlLarge:a[52]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure";a.__tables__=["attachment_items"];e.exports=a}),null);
__d("LSInsertNewMessageRange",["LSClearMessagePlaceholderRange"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSClearMessagePlaceholderRange"),a[0],a[9],c.i64.cast([0,0]))},function(b){return c.filter(c.db.table(13).fetch([[[a[0],{lte:a[5]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.le(b.minTimestampMs,a[5])&&c.i64.ge(b.maxTimestampMs,a[5])}).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[a[1],a[3],a[7]],d[0]=e[0],d[1]=e[1],d[2]=e[2],e):(c=b.item,e=[c.minTimestampMs,c.minMessageId,c.hasMoreBefore],d[0]=e[0],d[1]=e[1],d[2]=e[2],e)})},function(b){return c.filter(c.db.table(13).fetch([[[a[0],{lte:a[6]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.le(b.minTimestampMs,a[6])&&c.i64.ge(b.maxTimestampMs,a[6])}).next().then(function(b,c){var e=b.done;b=b.value;return e?(e=[a[2],a[4],a[8]],d[4]=e[0],d[5]=e[1],d[6]=e[2],e):(c=b.item,e=[c.maxTimestampMs,c.maxMessageId,c.hasMoreAfter],d[4]=e[0],d[5]=e[1],d[6]=e[2],e)})},function(b){return c.forEach(c.filter(c.db.table(13).fetch([[[a[0],{lte:a[6]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.ge(a[6],b.minTimestampMs)&&c.i64.le(a[5],b.maxTimestampMs)}),function(a){return a["delete"]()})},function(b){return c.db.table(13).put({threadKey:a[0],minTimestampMs:d[0],minMessageId:d[1],maxTimestampMs:d[4],maxMessageId:d[5],isLoadingBefore:!1,isLoadingAfter:!1,hasMoreBefore:d[2],hasMoreAfter:d[6]})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxInsertNewMessageRangeStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSMarkThreadRead",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(9).fetch([[[a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[1])&&b.i64.gt(a[0],c.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[0]})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxMarkThreadReadStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticMarkThreadReadV2",["LSIssueNewTask","LSMarkThreadRead"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(d){return c.storedProcedure(b("LSMarkThreadRead"),a[1],a[0])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(e){return d[2]=new c.Map(),d[2].set("thread_id",a[0]),d[2].set("last_read_watermark_ts",a[1]),d[2].set("sync_group",d[0]),d[3]=d[2].get("thread_id"),d[4]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[3]),c.i64.cast([0,21]),d[4],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticMarkThreadReadV2StoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSSetMessageDisplayedContentTypes",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.sequence([function(d){return b.db.table(16).fetch([[[a[0],a[1]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?(d=[void 0,void 0],c[0]=d[0],c[1]=d[1],d):(b=a.item,d=[b.attachmentType,b.xmaLayoutType],c[0]=d[0],c[1]=d[1],d)})},function(d){return b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}).next().then(function(a,d){var e=a.done;a=a.value;return e?(e=[b.i64.cast([0,0]),void 0,void 0],c[3]=e[0],c[4]=e[1],c[5]=e[2],e):(d=a.item,e=[d.replySourceTypeV2,d.replySourceId,d.text],c[3]=e[0],c[4]=e[1],c[5]=e[2],e)})},function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[7]=void 0:(b=a.item,c[7]=b.customEmoji)})},function(d){return b.i64.eq(c[0],b.i64.cast([0,6]))?c[9]=b.i64.cast([0,64]):(b.i64.eq(c[0],b.i64.cast([0,5]))?c[16]=b.i64.cast([0,4]):(b.i64.eq(c[0],b.i64.cast([0,3]))?c[17]=b.i64.cast([0,16384]):(b.i64.eq(c[0],b.i64.cast([0,2]))?c[18]=b.i64.cast([0,2]):(b.i64.eq(c[0],b.i64.cast([0,4]))?c[19]=b.i64.cast([0,2]):c[19]=a[5]?b.i64.cast([0,4096]):b.i64.cast([0,0]),c[18]=c[19]),c[17]=c[18]),c[16]=c[17]),c[9]=c[16]),c[10]=c[5]!==void 0&&c[5]!==""&&c[5]!==c[7]?b.i64.or_(c[9],b.i64.cast([0,1])):c[9],c[11]=c[7]!==void 0&&c[7]===c[5]?b.i64.or_(c[10],b.i64.cast([0,128])):c[10],c[12]=b.i64.eq(c[0],b.i64.cast([0,7]))?b.i64.or_(c[11],b.i64.cast([0,8])):c[11],c[13]=b.i64.eq(c[1],b.i64.cast([0,0]))?b.i64.or_(c[12],b.i64.cast([0,1024])):b.i64.eq(c[1],b.i64.cast([0,1]))?b.i64.or_(c[12],b.i64.cast([0,2048])):c[12],c[14]=b.i64.eq(c[3],b.i64.cast([0,2]))&&c[4]!==void 0?b.i64.or_(c[13],b.i64.cast([0,512])):c[13],c[15]=c[5]!==void 0&&c[5]!==""&&c[5]!==c[7]&&b.i64.eq(c[3],b.i64.cast([0,5]))?b.i64.or_(c[14],b.i64.cast([0,512])):c[14],b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(d){var e=d.update;d.item;return e({displayedContentTypes:a[4]?b.i64.cast([0,32]):b.i64.eq(c[3],b.i64.cast([0,3]))?b.i64.or_(c[15],b.i64.cast([0,8192])):c[15]})})}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxSetMessageDisplayedContentTypesStoredProcedure";a.__tables__=["attachments","messages","threads"];e.exports=a}),null);
__d("LSUpsertInboxThreadsRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(198).put({syncGroup:a[0],minLastActivityTimestampMs:a[1],hasMoreBefore:a[2],isLoadingBefore:a[3],minThreadKey:a[4]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertInboxThreadsRangeStoredProcedure";a.__tables__=["inbox_threads_ranges"];e.exports=a}),null);
__d("LSUpsertReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(8).put({threadKey:a[0],messageId:a[2],actorId:a[3],timestampMs:a[1],reaction:a[4],authorityLevel:a[5],reactionCreationTimestampMs:a[6]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertReactionStoredProcedure";a.__tables__=["reactions"];e.exports=a}),null);
__d("LSUpsertSyncGroupThreadsRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(220).put({syncGroup:a[0],parentThreadKey:a[1],minLastActivityTimestampMs:a[2],hasMoreBefore:a[3],isLoadingBefore:a[4],minThreadKey:a[5]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpsertSyncGroupThreadsRangeStoredProcedure";a.__tables__=["sync_group_threads_ranges"];e.exports=a}),null);
__d("MWDeleteAllDBs",["MAWEncryptionIndexedDbV2","MAWIndexedDBDeletion","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","asyncToGeneratorRuntime","cr:10030","cr:4434"],(function(a,b,c,d,e,f,g){"use strict";function h(){d("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(c("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE,"full_due_to_ear")}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){b("cr:10030")&&(yield b("cr:10030").deleteIndexedDB(a)),b("cr:4434")&&(yield b("cr:4434").deleteEBIDB().then(function(){return h()})),yield d("MAWIndexedDBDeletion").deleteMAWPersistence(),(c==null?void 0:c.deleteEncryptionDB)===!0&&(yield d("MAWEncryptionIndexedDbV2").deleteEncryptionDB_UNSAFE(void 0,"delete_all_dbs"))});return i.apply(this,arguments)}function e(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){b("cr:4434")&&(yield b("cr:4434").deleteEBIDB().then(function(){return h()}))});return j.apply(this,arguments)}g.deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING=a;g.deleteEBSMDB=e}),98);
__d("MAWEncryptionErrorHandler",["FBLogger","MAWSetupWorker","MWDeleteAllDBs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a="MAWEARKeychainDecryptionError",b="error";try{yield d("MAWSetupWorker").terminateWorker(a);return d("MWDeleteAllDBs").deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING(b,{deleteEncryptionDB:!0})}catch(d){c("FBLogger")("maw_ear").catching(d).mustfixThrow("Fail to delete dbs from: %s terminateWorkerReason: %s",b,a)}});return h.apply(this,arguments)}g.handleEARKeychainError=a}),98);
__d("MWXPopoverLoadingState.react",["cr:8235"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:8235")}),98);/*FB_PKG_DELIM*/
__d("LSGetFirstAvailableThreadNullstateCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(29).fetchDesc().next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableThreadNullstateCTAIDStoredProcedure";a.__tables__=["thread_nullstate_ctas"];e.exports=a}),null);
__d("LSGetFirstAvailableThreadNullstateCTAIDForThreadKey",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(29).fetch([[[a[0]]],"threadKeyCtaId"]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=void 0:(b=a.item,c[0]=b.ctaId)})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableThreadNullstateCTAIDForThreadKeyStoredProcedure";a.__tables__=["thread_nullstate_ctas"];e.exports=a}),null);
__d("LSInsertIcebreakerData",["LSArrayGetObjectAt","LSGetFirstAvailableThreadNullstateCTAID","LSGetFirstAvailableThreadNullstateCTAIDForThreadKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.storedProcedure(b("LSGetFirstAvailableThreadNullstateCTAIDForThreadKey"),a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(e){return c.i64.eq(d[0],void 0)?c.sequence([function(a){return c.storedProcedure(b("LSGetFirstAvailableThreadNullstateCTAID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=c.createArray(),d[3]=c.i64.of_int32(a[1].length),c.i64.gt(d[3],c.i64.cast([0,0]))?c.loopAsync(d[3],function(e){return d[7]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return d[10]=d[8].get("thread_key"),d[11]=(d[2].push(d[10]),d[2])}])}):c.resolve()},function(a){return d[4]=new c.Map(),c.sequence([function(a){return d[7]=c.createArray(),d[8]=c.i64.of_int32(d[2].length),c.i64.gt(d[8],c.i64.cast([0,0]))?c.loopAsync(d[8],function(a){return d[10]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[2],d[10]).then(function(a){return a=a,d[11]=a[0],d[12]=a[1],a})},function(a){return d[13]=(d[7].push(c.i64.to_string(d[11])),d[7])}])}):c.resolve()},function(a){return d[9]=d[7].join(","),d[5]=d[9]}])},function(a){return c.forEach(c.filter(c.db.table(28).fetch(),function(a){return d[2].some(function(b){return c.i64.eq(a.threadKey,b)})}),function(a){a=a.item;return d[4].set(c.i64.to_string(a.threadKey),!0)})},function(e){return d[6]=c.i64.of_int32(a[1].length),c.i64.gt(d[6],c.i64.cast([0,0]))?c.loopAsync(d[6],function(e){return d[7]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[1],d[7]).then(function(a){return a=a,d[8]=a[0],d[9]=a[1],a})},function(a){return d[12]=c.i64.add(d[1],d[7]),d[10]=d[8].get("thread_key"),d[11]=d[4].get(c.i64.to_string(d[10])),d[11]!==void 0?c.db.table(29).fetch([[[d[12]]]]).next().then(function(a){var b=a.done;a.value;return b?(d[13]=d[8].get("thread_key"),d[14]=d[8].get("title"),d[15]=d[8].get("cta_type"),d[16]=d[8].get("platform_token"),d[17]=d[8].get("cta_identifier"),c.db.table(29).add({ctaId:d[12],threadKey:d[13],title:d[14],ctaType:d[15],platformToken:d[16],ctaIdentifier:d[17]})):0}):c.resolve()}])}):c.resolve()}]):c.resolve()}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxInsertIcebreakerDataStoredProcedure";a.__tables__=["thread_nullstate","thread_nullstate_ctas"];e.exports=a}),null);
__d("LSInsertStickerAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[14],a[18],a[19]]]]),function(c){return b.i64.eq(c.threadKey,a[14])&&b.i64.eq(b.i64.cast([0,0]),a[15])&&c.messageId===a[18]&&c.attachmentFbid===a[19]&&b.i64.lt(c.authorityLevel,a[31])&&b.i64.eq(c.attachmentType,b.i64.cast([0,1]))&&c.hasMedia===!0&&c.hasXma===!1&&b.i64.eq(c.ephemeralMediaState,void 0)&&c.isSharable===!1}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[14],messageId:a[18],attachmentFbid:a[19],hasMedia:!0,isSharable:!1,playableUrl:a[0],playableUrlFallback:a[1],playableUrlExpirationTimestampMs:a[2],playableUrlMimeType:a[3],previewUrl:a[4],previewUrlFallback:a[5],previewUrlExpirationTimestampMs:a[6],previewUrlMimeType:a[7],previewWidth:a[9],previewHeight:a[10],imageUrlMimeType:a[11],attachmentIndex:a[12],accessibilitySummaryText:a[13],attachmentType:b.i64.cast([0,1]),timestampMs:a[17],hasXma:!1,imageUrl:a[20],imageUrlFallback:a[21],imageUrlExpirationTimestampMs:a[22],faviconUrlExpirationTimestampMs:a[23],avatarViewSize:a[25],avatarCount:a[26],targetId:a[27],mustacheText:a[30],authorityLevel:a[31]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertStickerAttachmentStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSInsertXmaAttachment",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(16).fetch([[[a[25],a[30],a[32]]]]),function(c){return b.i64.eq(c.threadKey,a[25])&&b.i64.eq(b.i64.cast([0,0]),a[26])&&c.messageId===a[30]&&c.attachmentFbid===a[32]&&b.i64.lt(c.authorityLevel,a[128])&&(b.i64.eq(c.attachmentType,b.i64.cast([0,7]))||b.i64.eq(c.attachmentType,b.i64.cast([0,0])))&&c.hasMedia===!1&&c.hasXma===!0&&b.i64.eq(c.ephemeralMediaState,void 0)}),function(a){return a["delete"]()})},function(c){return b.db.table(16).add({threadKey:a[25],messageId:a[30],attachmentFbid:a[32],filename:a[1],filesize:a[2],hasMedia:!1,isSharable:a[3],playableUrl:a[4],playableUrlFallback:a[5],playableUrlExpirationTimestampMs:a[6],playableUrlMimeType:a[7],previewUrl:a[8],previewUrlFallback:a[9],previewUrlExpirationTimestampMs:a[10],previewUrlMimeType:a[11],previewWidth:a[13],previewHeight:a[14],attributionAppId:a[15],attributionAppName:a[16],attributionAppIcon:a[17],attributionAppIconFallback:a[18],attributionAppIconUrlExpirationTimestampMs:a[19],attachmentIndex:a[20],accessibilitySummaryText:a[21],shouldRespectServerPreviewSize:a[22],subtitleIconUrl:a[23],shouldAutoplayVideo:a[24],attachmentType:a[27],timestampMs:a[29],offlineAttachmentId:a[31],hasXma:!0,xmaLayoutType:a[33],xmasTemplateType:a[34],collapsibleId:a[35],defaultCtaId:a[36],defaultCtaTitle:a[37],defaultCtaType:a[38],attachmentCta1Id:a[40],cta1Title:a[41],cta1IconType:a[42],cta1Type:a[43],attachmentCta2Id:a[45],cta2Title:a[46],cta2IconType:a[47],cta2Type:a[48],attachmentCta3Id:a[50],cta3Title:a[51],cta3IconType:a[52],cta3Type:a[53],imageUrl:a[54],imageUrlFallback:a[55],imageUrlExpirationTimestampMs:a[56],actionUrl:a[57],titleText:a[58],subtitleText:a[59],subtitleDecorationType:a[60],maxTitleNumOfLines:a[61],maxSubtitleNumOfLines:a[62],descriptionText:a[63],sourceText:a[64],faviconUrl:a[65],faviconUrlFallback:a[66],faviconUrlExpirationTimestampMs:a[67],listItemsId:a[69],listItemsDescriptionText:a[70],listItemsDescriptionSubtitleText:a[71],listItemsSecondaryDescriptionText:a[72],listItemId1:a[73],listItemTitleText1:a[74],listItemContactUrlList1:a[75],listItemProgressBarFilledPercentage1:a[76],listItemContactUrlExpirationTimestampList1:a[77],listItemContactUrlFallbackList1:a[78],listItemAccessibilityText1:a[79],listItemTotalCount1:a[80],listItemId2:a[81],listItemTitleText2:a[82],listItemContactUrlList2:a[83],listItemProgressBarFilledPercentage2:a[84],listItemContactUrlExpirationTimestampList2:a[85],listItemContactUrlFallbackList2:a[86],listItemAccessibilityText2:a[87],listItemTotalCount2:a[88],listItemId3:a[89],listItemTitleText3:a[90],listItemContactUrlList3:a[91],listItemProgressBarFilledPercentage3:a[92],listItemContactUrlExpirationTimestampList3:a[93],listItemContactUrlFallbackList3:a[94],listItemAccessibilityText3:a[95],listItemTotalCount3:a[96],isBorderless:a[100],headerImageUrlMimeType:a[101],headerTitle:a[102],headerSubtitleText:a[103],headerImageUrl:a[104],headerImageUrlFallback:a[105],headerImageUrlExpirationTimestampMs:a[106],previewImageDecorationType:a[107],shouldHighlightHeaderTitleInTitle:a[108],targetId:a[109],attachmentLoggingType:a[112],previewUrlLarge:a[114],bodyText:a[115],gatingType:a[116],gatingTitle:a[117],targetExpiryTimestampMs:a[118],countdownTimestampMs:a[119],shouldBlurSubattachments:a[120],verifiedType:a[121],captionBodyText:a[122],isPublicXma:a[123],replyCount:a[124],xmaDataclass:a[125],previewOverlayCountdownExpiry:a[126],stickerType:a[127],authorityLevel:a[128]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertXmaAttachmentStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSIssueInsertPersistentMenuCtasForThreadTask",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"insert_persistent_menu_ctas",c.i64.cast([0,54]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSComposerMenusIssueInsertPersistentMenuCtasForThreadTaskStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSSetMessageTextHasLinks",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(12).fetch([[[a[0],a[2],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.timestampMs,a[2])&&c.messageId===a[1]}),function(a){var b=a.update;a.item;return b({textHasLinks:!0})})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetMessageTextHasLinksStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSUpdateAttachmentCtaAtIndexIgnoringAuthority",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.eq(a[6],b.i64.cast([0,0]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({defaultCtaId:a[3],defaultCtaTitle:a[4],defaultCtaType:a[5]})}):b.i64.eq(a[6],b.i64.cast([0,1]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({attachmentCta1Id:a[3],cta1Title:a[4],cta1Type:a[5],cta1IconType:void 0})}):b.i64.eq(a[6],b.i64.cast([0,2]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({attachmentCta2Id:a[3],cta2Title:a[4],cta2Type:a[5],cta2IconType:void 0})}):b.i64.eq(a[6],b.i64.cast([0,3]))?b.forEach(b.db.table(16).fetch([[[a[0],a[1],a[2]]]]),function(b){var c=b.update;b.item;return c({attachmentCta3Id:a[3],cta3Title:a[4],cta3Type:a[5],cta3IconType:void 0})}):b.resolve(function(a){b.logger(a).warn(a)}("Unexpected CTA index"))},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxUpdateAttachmentCtaAtIndexIgnoringAuthorityStoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSVerifyCustomCommandsExist",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(296).fetch([[[a[0]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?(d[1]=new c.Map(),d[1].set("thread_key",a[0]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"fetch_custom_thread_commands",c.i64.cast([0,767]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSOmnistoreSettingsVerifyCustomCommandsExistStoredProcedure";a.__tables__=["custom_thread_commands"];e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSDeleteThenInsertAdminApprovalRequest",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.filter(b.db.table(26).fetch([[[a[0],a[1]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(c.contactId,a[1])&&b.i64.gt(c.authorityLevel,a[3])}).next().then(function(c){var d=c.done;c.value;return d?b.db.table(26).put({threadKey:a[0],contactId:a[1],authorityLevel:a[3],subscribeSource:a[2]}):0})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertAdminApprovalRequestStoredProcedure";a.__tables__=["group_membership_approval_requests"];e.exports=a}),null);
__d("LSDeleteThenInsertMessage",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(12).fetch([[[a[9]]],"optimistic"]).next().then(function(c,d){var e=c.done;c=c.value;return e?b.db.table(12).add({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:a[6],senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:a[7],stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],isForwarded:a[42],forwardScore:a[43],hasQuickReplies:a[44],adminMsgCtaId:a[45],adminMsgCtaTitle:a[46],adminMsgCtaType:a[47],cannotUnsendReason:a[48],textHasLinks:a[49],viewFlags:a[50],displayedContentTypes:a[51],viewedPluginKey:a[52],viewedPluginContext:a[53],quickReplyType:a[54],hotEmojiSize:a[55],platformXmdEncoded:a[56],replySourceTimestampMs:a[57],ephemeralDurationInSec:a[58],msUntilExpirationTs:a[59],ephemeralExpirationTs:a[60],takedownState:a[61],isCollapsed:a[62],subthreadKey:a[63],botResponseId:a[64],metadataDataclass:a[65],editCount:a[66],isPaidPartnership:a[67],adminSignatureName:a[68],adminSignatureProfileUrl:a[69],adminSignatureCreatorType:a[70],translatedText:a[71],textDialect:a[72],translatedTextDialect:a[73],scheduledTimestamp:a[74],isVideoQuickSend:a[75]}):(d=c.item,b.i64.le(d.authorityLevel,a[2])?b.db.table(12).put({threadKey:a[3],timestampMs:a[5],messageId:a[8],offlineThreadingId:a[9],authorityLevel:a[2],primarySortKey:d.primarySortKey,senderId:a[10],isAdminMessage:a[12],sendStatus:a[15],sendStatusV2:a[16],text:a[0],subscriptErrorMessage:a[1],secondarySortKey:d.secondarySortKey,stickerId:a[11],messageRenderingType:a[13],isUnsent:a[17],unsentTimestampMs:a[18],mentionOffsets:a[19],mentionLengths:a[20],mentionIds:a[21],mentionTypes:a[22],replySourceId:a[23],replySourceType:a[24],replySourceTypeV2:a[25],replyStatus:a[26],replySnippet:a[27],replyMessageText:a[28],replyToUserId:a[29],replyMediaExpirationTimestampMs:a[30],replyMediaUrl:a[31],replyMediaPreviewWidth:a[33],replyMediaPreviewHeight:a[34],replyMediaUrlMimeType:a[35],replyMediaUrlFallback:a[36],replyCtaId:a[37],replyCtaTitle:a[38],replyAttachmentType:a[39],replyAttachmentId:a[40],replyAttachmentExtra:a[41],isForwarded:a[42],forwardScore:a[43],hasQuickReplies:a[44],adminMsgCtaId:a[45],adminMsgCtaTitle:a[46],adminMsgCtaType:a[47],cannotUnsendReason:a[48],textHasLinks:a[49],viewFlags:a[50],displayedContentTypes:a[51],viewedPluginKey:a[52],viewedPluginContext:a[53],quickReplyType:a[54],hotEmojiSize:a[55],platformXmdEncoded:a[56],replySourceTimestampMs:a[57],ephemeralDurationInSec:a[58],msUntilExpirationTs:a[59],ephemeralExpirationTs:a[60],takedownState:a[61],isCollapsed:a[62],subthreadKey:a[63],botResponseId:a[64],metadataDataclass:a[65],editCount:a[66],isPaidPartnership:a[67],adminSignatureName:a[68],adminSignatureProfileUrl:a[69],adminSignatureCreatorType:a[70],translatedText:a[71],textDialect:a[72],translatedTextDialect:a[73],scheduledTimestamp:a[74],isVideoQuickSend:a[75]}):b.resolve())})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteThenInsertMessageStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSClearThreadBannedUsers",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.i64.neq(void 0,void 0)?b.forEach(b.db.table(297).fetch([[[a[0],void 0]]]),function(a){return a["delete"]()}):b.forEach(b.db.table(297).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearThreadBannedUsersStoredProcedure";a.__tables__=["thread_bans"];e.exports=a}),null);
__d("LSIssueParticipantPointQuery",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("table","14"),d[0].set("type",c.i64.cast([0,1])),d[0].set("1",a[0]),d[0].set("2",a[1]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"ppq",c.i64.cast([0,17]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),c.i64.cast([0,1]),void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssueParticipantPointQueryStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSUpdateSelectiveSyncStateV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.db.table(294).fetch([[[a[0]]]]).next().then(function(d,e){e=d.done;d=d.value;return e?(b.i64.neq(a[1],void 0)?c[1]=a[1]:c[1]=b.i64.cast([0,0]),b.db.table(294).add({threadKey:a[0],threadQueueSequenceId:c[1],lastSelectiveSyncTimestampMs:a[2]})):(d.item,b.sequence([function(c){return b.i64.neq(a[2],void 0)?b.forEach(b.db.table(294).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastSelectiveSyncTimestampMs:a[2]})}):b.resolve()},function(c){return b.i64.neq(a[1],void 0)?b.forEach(b.db.table(294).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({threadQueueSequenceId:a[1]})}):b.resolve()}]))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxUpdateSelectiveSyncStateV2StoredProcedure";a.__tables__=["community_thread_sync_info"];e.exports=a}),null);
__d("LSVerifyCommunityMemberContextualProfileExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.db.table(216).fetch([[[a[0],a[1]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?(d[1]=new c.Map(),d[1].set("community_id",a[1]),d[1].set("user_id",a[0]),d[2]=c.toJSON(d[1]),c.storedProcedure(b("LSIssueNewTask"),"load_contextual_profile",c.i64.cast([0,548]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(e.item,0)})},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyCommunityMemberContextualProfileExistsStoredProcedure";a.__tables__=["contextual_profile_v1"];e.exports=a}),null);
__d("LSVerifyContactParticipantExist",["LSIssueNewTask","LSIssueParticipantPointQuery"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.db.table(7).fetch([[[a[0]]]]).next().then(function(e,f){f=e.done;e=e.value;return f?c.sequence([function(e){return d[2]=new c.Map(),d[2].set("contact_id",a[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"cpq_v2",c.i64.cast([0,207]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(b){return c.forEach(c.filter(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))&&c.i64.lt(b.authorityLevel,c.i64.cast([0,60]))}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],rank:0,profilePictureUrl:"",name:a[2],isMessengerUser:!1,isMemorialized:!1,contactType:c.i64.cast([0,1]),contactTypeExact:c.i64.cast([0,1]),blockedByViewerStatus:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,60]),workForeignEntityType:c.i64.cast([0,0]),contactViewerRelationship:c.i64.cast([0,0])})}]):(e.item,0)})},function(d){return c.filter(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(b.contactId,a[0])}).next().then(function(d,e){e=d.done;d=d.value;return e?c.storedProcedure(b("LSIssueParticipantPointQuery"),a[1],a[0]):(d.item,0)})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxVerifyContactParticipantExistStoredProcedure";a.__tables__=["contacts","participants"];e.exports=a}),null);/*FB_PKG_DELIM*/
__d("LSMarkThreadReadV2",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,0]):(b=a.item,d[0]=b.lastActivityTimestampMs)})},function(e){return c.i64.gt(d[0],a[1])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.count(c.filter(c.db.table(12).fetch([[[a[0],{gt:a[1]}]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.senderId,d[2])&&c.i64.gt(b.timestampMs,a[1])})).then(function(a){return d[3]=a})},function(b){return c.count(c.db.table(12).fetch([[[a[0],{gt:a[1]}]]])).then(function(a){return d[4]=a})},function(b){return c.i64.eq(d[3],d[4])&&c.i64.gt(d[4],c.i64.cast([0,0]))?c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a=a.item;return b({lastReadWatermarkTimestampMs:a.lastActivityTimestampMs})}):c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.gt(a[1],b.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[1]})})}]):c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.gt(a[1],b.lastReadWatermarkTimestampMs)}),function(b){var c=b.update;b.item;return c({lastReadWatermarkTimestampMs:a[1]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkThreadReadV2StoredProcedure";a.__tables__=["threads","messages"];e.exports=a}),null);
__d("LSReceiveMarkThreadReadNative",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(e){return b.sequence([function(d){return b.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var d=a.done;a=a.value;return d?c[0]=void 0:(b=a.item,c[0]=b.lastReadWatermarkTimestampMs)})},function(d){return b.i64.neq(c[0],void 0)&&b.i64.neq(a[1],void 0)&&b.i64.gt(a[1],c[0])?c[2]=a[1]:c[2]=void 0,b.i64.neq(c[2],void 0)?b.sequence([function(d){return b.forEach(b.db.table(9).fetch([[[a[0]]]]),function(a){var b=a.update;a.item;return b({lastReadWatermarkTimestampMs:c[2]})})},function(a){return c[3]=c[2]}]):b.resolve(c[3]=void 0)},function(a){return d[0]=c[3]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSE2EEMessagingMetadataMailboxReceiveMarkThreadReadNativeStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSWriteCTAIdToThreadsTable",["LSGetFirstAvailableAttachmentCTAID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[1]===void 0?c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.neq(b.lastMessageCtaId,void 0)||b.lastMessageCtaType!==void 0)}),function(b){var c=b.update;b.item;return c({lastMessageCtaId:void 0,lastMessageCtaType:void 0,lastMessageCtaTimestampMs:a[2]})}):c.i64.neq(a[2],void 0)?c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,0]):(b=a.item,d[0]=b.lastActivityTimestampMs)})},function(e){return c.i64.ge(a[2],d[0])?c.sequence([function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastMessageCtaId:d[2],lastMessageCtaType:a[1],lastMessageCtaTimestampMs:a[2]})})}]):c.resolve(0)}]):c.resolve()},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxWriteCTAIdToThreadsTableStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);